/*! powerbi-client v2.2.6 | (c) 2016 Microsoft Corporation MIT */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["powerbi-client"]=t():e["powerbi-client"]=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var n=r(1);t.service=n;var i=r(9);t.factories=i;var o=r(5);t.models=o;var s=r(4);t.Report=s.Report;var a=r(8);t.Tile=a.Tile;var c=r(2);t.Embed=c.Embed;var h=r(6);t.Page=h.Page;var u=new n.Service(i.hpmFactory,i.wpmpFactory,i.routerFactory);window.powerbi=u},function(e,t,r){var n=r(2),i=r(4),o=r(7),s=r(8),a=r(6),c=r(3),h=function(){function e(t,r,n,i){var o=this;void 0===i&&(i={}),this.wpmp=r(i.wpmpName,i.logMessages),this.hpm=t(this.wpmp,null,i.version,i.type),this.router=n(this.wpmp),this.router.post("/reports/:uniqueId/events/:eventName",function(e,t){var r={type:"report",id:e.params.uniqueId,name:e.params.eventName,value:e.body};o.handleEvent(r)}),this.router.post("/reports/:uniqueId/pages/:pageName/events/:eventName",function(e,t){var r={type:"report",id:e.params.uniqueId,name:e.params.eventName,value:e.body};o.handleEvent(r)}),this.router.post("/dashboards/:uniqueId/events/:eventName",function(e,t){var r={type:"dashboard",id:e.params.uniqueId,name:e.params.eventName,value:e.body};o.handleEvent(r)}),this.embeds=[],this.config=c.assign({},e.defaultConfig,i),this.config.autoEmbedOnContentLoaded&&this.enableAutoEmbed()}return e.prototype.init=function(e,t){var r=this;void 0===t&&(t=void 0),e=e&&e instanceof HTMLElement?e:document.body;var i=Array.prototype.slice.call(e.querySelectorAll("["+n.Embed.embedUrlAttribute+"]"));return i.map(function(e){return r.embed(e,t)})},e.prototype.embed=function(e,t){void 0===t&&(t={});var r,n=e;return r=n.powerBiEmbed?this.embedExisting(n,t):this.embedNew(n,t)},e.prototype.embedNew=function(t,r){var o=r.type||t.getAttribute(n.Embed.typeAttribute);if(!o)throw new Error("Attempted to embed using config "+JSON.stringify(r)+" on element "+t.outerHTML+", but could not determine what type of component to embed. You must specify a type in the configuration or as an attribute such as '"+n.Embed.typeAttribute+'="'+i.Report.type.toLowerCase()+"\"'.");r.type=o;var s=c.find(function(e){return o===e.type.toLowerCase()},e.components);if(!s)throw new Error("Attempted to embed component of type: "+o+" but did not find any matching component.  Please verify the type you specified is intended.");var a=new s(this,t,r);return t.powerBiEmbed=a,this.embeds.push(a),a},e.prototype.embedExisting=function(e,t){var r=c.find(function(t){return t.element===e},this.embeds);if(!r)throw new Error("Attempted to embed using config "+JSON.stringify(t)+" on element "+e.outerHTML+" which already has embedded comopnent associated, but could not find the existing comopnent in the list of active components. This could indicate the embeds list is out of sync with the DOM, or the component is referencing the incorrect HTML element.");if("string"==typeof t.type&&t.type!==r.config.type)throw new Error("Embedding on an existing element with a different type than the previous embed object is not supported.  Attempted to embed using config "+JSON.stringify(t)+" on element "+e.outerHTML+", but the existing element contains an embed of type: "+this.config.type+" which does not match the new type: "+t.type);return r.load(t),r},e.prototype.enableAutoEmbed=function(){var e=this;window.addEventListener("DOMContentLoaded",function(t){return e.init(document.body)},!1)},e.prototype.get=function(e){var t=e;if(!t.powerBiEmbed)throw new Error("You attempted to get an instance of powerbi component associated with element: "+e.outerHTML+" but there was no associated instance.");return t.powerBiEmbed},e.prototype.find=function(e){return c.find(function(t){return t.config.uniqueId===e},this.embeds)},e.prototype.reset=function(e){var t=e;if(t.powerBiEmbed){c.remove(function(e){return e===t.powerBiEmbed},this.embeds),delete t.powerBiEmbed;var r=e.querySelector("iframe");r&&r.remove()}},e.prototype.handleEvent=function(e){var t=c.find(function(t){return t.config.type===e.type&&t.config.uniqueId===e.id},this.embeds);if(t){var r=e.value;if("pageChanged"===e.name){var n="newPage",i=r[n];if(!i)throw new Error("Page model not found at 'event.value."+n+"'.");r[n]=new a.Page(t,i.name,i.displayName)}c.raiseCustomEvent(t.element,e.name,r)}},e.components=[s.Tile,i.Report,o.Dashboard],e.defaultConfig={autoEmbedOnContentLoaded:!1,onError:function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return console.log(e[0],e.slice(1))}},e}();t.Service=h},function(e,t,r){var n=r(3),i=function(){function e(t,r,i){var o=this;this.allowedEvents=[],Array.prototype.push.apply(this.allowedEvents,e.allowedEvents),this.eventHandlers=[],this.service=t,this.element=r;var s=n.assign({},e.defaultSettings,i.settings);this.config=n.assign({settings:s},i),this.config.accessToken=this.getAccessToken(t.accessToken),this.config.embedUrl=this.getEmbedUrl(),this.config.id=this.getId(),this.config.uniqueId=this.getUniqueId();var a='<iframe style="width:100%;height:100%;" src="'+this.config.embedUrl+'" scrolling="no" allowfullscreen="true"></iframe>';this.element.innerHTML=a,this.iframe=this.element.childNodes[0],this.iframe.addEventListener("load",function(){return o.load(o.config)},!1)}return e.prototype.load=function(e){var t=this,r=this.validate(e);if(r)throw r;return this.service.hpm.post(this.loadPath,e,{uid:this.config.uniqueId},this.iframe.contentWindow).then(function(r){return n.assign(t.config,e),r.body},function(e){throw e.body})},e.prototype.off=function(e,t){var r=this,i={name:e,type:null,id:null,value:null};if(t)n.remove(function(e){return e.test(i)&&e.handle===t},this.eventHandlers),this.element.removeEventListener(e,t);else{var o=this.eventHandlers.filter(function(e){return e.test(i)});o.forEach(function(t){n.remove(function(e){return e===t},r.eventHandlers),r.element.removeEventListener(e,t.handle)})}},e.prototype.on=function(e,t){if(this.allowedEvents.indexOf(e)===-1)throw new Error("eventName is must be one of "+this.allowedEvents+". You passed: "+e);this.eventHandlers.push({test:function(t){return t.name===e},handle:t}),this.element.addEventListener(e,t)},e.prototype.reload=function(){return this.load(this.config)},e.prototype.getAccessToken=function(t){var r=this.config.accessToken||this.element.getAttribute(e.accessTokenAttribute)||t;if(!r)throw new Error("No access token was found for element. You must specify an access token directly on the element using attribute '"+e.accessTokenAttribute+"' or specify a global token at: powerbi.accessToken.");return r},e.prototype.getEmbedUrl=function(){var t=this.config.embedUrl||this.element.getAttribute(e.embedUrlAttribute);if("string"!=typeof t||0===t.length)throw new Error("Embed Url is required, but it was not found. You must provide an embed url either as part of embed configuration or as attribute '"+e.embedUrlAttribute+"'.");return t},e.prototype.getUniqueId=function(){return this.config.uniqueId||this.element.getAttribute(e.nameAttribute)||n.createRandomString()},e.prototype.fullscreen=function(){var e=this.iframe.requestFullscreen||this.iframe.msRequestFullscreen||this.iframe.mozRequestFullScreen||this.iframe.webkitRequestFullscreen;e.call(this.iframe)},e.prototype.exitFullscreen=function(){if(this.isFullscreen(this.iframe)){var e=document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.msExitFullscreen;e.call(document)}},e.prototype.isFullscreen=function(e){var t=["fullscreenElement","webkitFullscreenElement","mozFullscreenScreenElement","msFullscreenElement"];return t.some(function(t){return document[t]===e})},e.allowedEvents=["loaded"],e.accessTokenAttribute="powerbi-access-token",e.embedUrlAttribute="powerbi-embed-url",e.nameAttribute="powerbi-name",e.typeAttribute="powerbi-type",e.defaultSettings={filterPaneEnabled:!0},e}();t.Embed=i},function(e,t){function r(e,t,r){var n;"function"==typeof CustomEvent?n=new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,r)),e.dispatchEvent(n)}function n(e,t){if(!Array.isArray(t))throw new Error("You attempted to call find with second parameter that was not an array. You passed: "+t);var r;return t.some(function(t,n){if(e(t))return r=n,!0}),r}function i(e,t){var r=n(e,t);return t[r]}function o(e,t){var r=n(e,t);t.splice(r,1)}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[0];if(void 0===r||null===r)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(r),i=1;i<arguments.length;i++){var o=arguments[i];if(void 0!==o&&null!==o)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}return n}function a(){return(Math.random()+1).toString(36).substring(7)}t.raiseCustomEvent=r,t.findIndex=n,t.find=i,t.remove=o,t.assign=s,t.createRandomString=a},function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(2),o=r(5),s=r(3),a=r(6),c=function(e){function t(r,n,i){var o=i.settings&&i.settings.filterPaneEnabled||!("false"===n.getAttribute(t.filterPaneEnabledAttribute)),a=i.settings&&i.settings.navContentPaneEnabled||!("false"===n.getAttribute(t.navContentPaneEnabledAttribute)),c=s.assign({filterPaneEnabled:o,navContentPaneEnabled:a},i.settings),h=s.assign({settings:c},i);e.call(this,r,n,h),this.loadPath="/report/load",Array.prototype.push.apply(this.allowedEvents,t.allowedEvents)}return n(t,e),t.findIdFromEmbedUrl=function(e){var t,r=/reportId="?([^&]+)"?/,n=e.match(r);return n&&(t=n[1]),t},t.prototype.getFilters=function(){return this.service.hpm.get("/report/filters",{uid:this.config.uniqueId},this.iframe.contentWindow).then(function(e){return e.body},function(e){throw e.body})},t.prototype.getId=function(){var e=this.config.id||this.element.getAttribute(t.reportIdAttribute)||t.findIdFromEmbedUrl(this.config.embedUrl);if("string"!=typeof e||0===e.length)throw new Error("Report id is required, but it was not found. You must provide an id either as part of embed configuration or as attribute '"+t.reportIdAttribute+"'.");return e},t.prototype.getPages=function(){var e=this;return this.service.hpm.get("/report/pages",{uid:this.config.uniqueId},this.iframe.contentWindow).then(function(t){return t.body.map(function(t){return new a.Page(e,t.name,t.displayName)})},function(e){throw e.body})},t.prototype.page=function(e,t){return new a.Page(this,e,t)},t.prototype.print=function(){return this.service.hpm.post("/report/print",null,{uid:this.config.uniqueId},this.iframe.contentWindow).then(function(e){return e.body})["catch"](function(e){throw e.body})},t.prototype.removeFilters=function(){return this.setFilters([])},t.prototype.setPage=function(e){var t={name:e,displayName:null};return this.service.hpm.put("/report/pages/active",t,{uid:this.config.uniqueId},this.iframe.contentWindow)["catch"](function(e){throw e.body})},t.prototype.setFilters=function(e){return this.service.hpm.put("/report/filters",e,{uid:this.config.uniqueId},this.iframe.contentWindow)["catch"](function(e){throw e.body})},t.prototype.updateSettings=function(e){return this.service.hpm.patch("/report/settings",e,{uid:this.config.uniqueId},this.iframe.contentWindow)["catch"](function(e){throw e.body})},t.prototype.validate=function(e){return o.validateReportLoad(e)},t.allowedEvents=["rendered","dataSelected","filtersApplied","pageChanged","error"],t.reportIdAttribute="powerbi-report-id",t.filterPaneEnabledAttribute="powerbi-settings-filter-pane-enabled",t.navContentPaneEnabledAttribute="powerbi-settings-nav-content-pane-enabled",t.typeAttribute="powerbi-type",t.type="Report",t}(i.Embed);t.Report=c},function(e,t,r){/*! powerbi-models v0.10.1 | (c) 2016 Microsoft Corporation MIT */
!function(t,r){e.exports=r()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function n(e){var t=e.message;return t||(t=e.path+" is invalid. Not meeting "+e.keyword+" constraint"),{message:t}}function i(e,t){return function(r){var i=u(e,t),o=i(r);return o?void 0:i.errors.map(n)}}function o(e){var t=e,r=e;return"string"==typeof t.operator&&Array.isArray(t.values)?p.Basic:"string"==typeof r.logicalOperator&&Array.isArray(r.conditions)?p.Advanced:p.Unknown}function s(e){return void 0!==e.table&&void 0!==e.measure}function a(e){return void 0!==e.table&&void 0!==e.column}function c(e){return void 0!==e.table&&void 0!==e.hierarchy&&void 0!==e.hierarchyLevel}var h=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};t.advancedFilterSchema=r(1),t.filterSchema=r(2),t.loadSchema=r(3),t.dashboardLoadSchema=r(4),t.pageSchema=r(5),t.settingsSchema=r(6),t.basicFilterSchema=r(7);var u=r(8);t.validateSettings=i(t.settingsSchema,{schemas:{basicFilter:t.basicFilterSchema,advancedFilter:t.advancedFilterSchema}}),t.validateReportLoad=i(t.loadSchema,{schemas:{settings:t.settingsSchema,basicFilter:t.basicFilterSchema,advancedFilter:t.advancedFilterSchema}}),t.validateDashboardLoad=i(t.dashboardLoadSchema),t.validatePage=i(t.pageSchema),t.validateFilter=i(t.filterSchema,{schemas:{basicFilter:t.basicFilterSchema,advancedFilter:t.advancedFilterSchema}}),function(e){e[e.Advanced=0]="Advanced",e[e.Basic=1]="Basic",e[e.Unknown=2]="Unknown"}(t.FilterType||(t.FilterType={}));var p=t.FilterType;t.getFilterType=o,t.isMeasure=s,t.isColumn=a,t.isHierarchy=c;var d=function(){function e(e){this.target=e}return e.prototype.toJSON=function(){return{$schema:this.schemaUrl,target:this.target}},e}();t.Filter=d;var f=function(e){function t(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e.call(this,r),this.operator=n,this.schemaUrl=t.schemaUrl,0===i.length)throw new Error("values must be a non-empty array. You passed: "+i);Array.isArray(i[0])?this.values=i[0]:this.values=i}return h(t,e),t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.operator=this.operator,t.values=this.values,t},t.schemaUrl="http://powerbi.com/product/schema#basic",t}(d);t.BasicFilter=f;var l=function(e){function t(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e.call(this,r),this.schemaUrl=t.schemaUrl,"string"!=typeof n||0===n.length)throw new Error("logicalOperator must be a valid operator, You passed: "+n);this.logicalOperator=n;var s;if(s=Array.isArray(i[0])?i[0]:i,0===s.length)throw new Error("conditions must be a non-empty array. You passed: "+i);if(s.length>2)throw new Error("AdvancedFilters may not have more than two conditions. You passed: "+i.length);if(1===s.length&&"And"!==n)throw new Error('Logical Operator must be "And" when there is only one condition provided');this.conditions=s}return h(t,e),t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.logicalOperator=this.logicalOperator,t.conditions=this.conditions,t},t.schemaUrl="http://powerbi.com/product/schema#advanced",t}(d);t.AdvancedFilter=l},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{target:{oneOf:[{type:"object",properties:{table:{type:"string"},column:{type:"string"}},required:["table","column"]},{type:"object",properties:{table:{type:"string"},hierarchy:{type:"string"},hierarchyLevel:{type:"string"}},required:["table","hierarchy","hierarchyLevel"]},{type:"object",properties:{table:{type:"string"},measure:{type:"string"}},required:["table","measure"]}]},logicalOperator:{type:"string"},conditions:{type:"array",items:{type:"object",properties:{value:{type:["string","boolean","number"]},operator:{type:"string"}},required:["value","operator"]}}},required:["target","logicalOperator","conditions"]}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",oneOf:[{$ref:"#basicFilter"},{$ref:"#advancedFilter"}],invalidMessage:"filter is invalid"}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{accessToken:{type:"string",messages:{type:"accessToken must be a string",required:"accessToken is required"}},id:{type:"string",messages:{type:"id must be a string",required:"id is required"}},settings:{$ref:"#settings"},pageName:{type:"string",messages:{type:"pageName must be a string"}},filters:{type:"array",items:{type:"object",oneOf:[{$ref:"#basicFilter"},{$ref:"#advancedFilter"}]},invalidMessage:"filters property is invalid"}},required:["accessToken","id"]}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{accessToken:{type:"string",messages:{type:"accessToken must be a string",required:"accessToken is required"}},id:{type:"string",messages:{type:"id must be a string",required:"id is required"}},pageView:{type:"string",messages:{type:'pageView must be a string with one of the following values: "actualSize", "fitToWidth", "oneColumn"'}}},required:["accessToken","id"]}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{name:{type:"string",messages:{type:"name must be a string",required:"name is required"}}},required:["name"]}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{filterPaneEnabled:{type:"boolean",messages:{type:"filterPaneEnabled must be a boolean"}},navContentPaneEnabled:{type:"boolean",messages:{type:"navContentPaneEnabled must be a boolean"}}}}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{target:{type:"object",properties:{table:{type:"string"},column:{type:"string"},hierarchy:{type:"string"},hierarchyLevel:{type:"string"},measure:{type:"string"}},required:["table"]},operator:{type:"string"},values:{type:"array",items:{type:["string","boolean","number"]}}},required:["target","operator","values"]}},function(e,t,r){e.exports=r(9)},function(e,t,r){"use strict";function n(e){return e=e instanceof RegExp?e:new RegExp(e),A?e.toString():"/"+e.source.replace(v,"\\$&")+"/"}function i(e){return'"'+e.replace(y,"\\$1")+'"'}function o(e,t){return b.lastIndex=0,b.test(t)?e+"."+t:e+"["+i(t)+"]"}function s(e){if(void 0===e)return"undefined";var t=Object.prototype.toString.call(e);return t.substr(8,t.length-9).toLowerCase()}function a(e){return(0|e)===e}function c(e,t){q[t].type=e,q[t].keyword=t}function h(e){var t,r,n,i=Object.keys(e),o=i.indexOf("properties"),s=i.indexOf("patternProperties"),a={"enum":Array.isArray(e["enum"])&&e["enum"].length>0,type:null,allType:[],perType:{}};for(e.type&&("string"==typeof e.type?a.type=[e.type]:Array.isArray(e.type)&&e.type.length&&(a.type=e.type.slice(0))),n=0;n<i.length;n++)t=i[n],"enum"!==t&&"type"!==t&&(r=q[t],r&&(r.type?(a.perType[r.type]||(a.perType[r.type]=[]),o>-1&&"required"===t||s>-1&&"additionalProperties"===t||a.perType[r.type].push(t)):a.allType.push(t)));return a}function u(e,t){var r,n,i=e.substr(4),o=i.length,s=[],a="",c=!1;for(n=0;n<o;n++)switch(r=i[n]){case".":a&&(a+=r);break;case"[":isNaN(+i[n+1])?(c=!0,a&&(s.push('"'+a+'"'),a="")):(c=!1,a&&(a+="."));break;case"]":s.push(c?a:'"'+a+'"'),a="";break;default:a+=r}return a&&s.push('"'+a+'"'),t&&s.push('"'+t+'"'),1===s.length&&c?'"" + '+s[0]+' + ""':s.join(' + "." + ')||'""'}function p(e){var t,r,n,i,o=e,a=s(e);if("object"===a)for(o={},t=Object.keys(e),i=0,r=t.length;i<r;i++)n=t[i],o[n]=p(e[n]);else if("array"===a)for(o=[],i=0,r=e.length;i<r;i++)o[i]=p(e[i]);else{if("regexp"===a)return new RegExp(e);if("date"===a)return new Date(e.toJSON())}return o}function d(e,t){for(var r=0,n=t.length;r<n;r++)if(O(e,t[r]))return!0;return!1}function f(){this.objects=[],this.properties=[]}function l(e,t,r,n,i){var o,a,c,h,u,d,m;if("object"!==s(e))return t;if(e=n.resolve(e),void 0===t&&e.hasOwnProperty("default")&&(t=p(e["default"])),o=s(t),"object"===o&&"object"===s(e.properties)){for(d=Object.keys(e.properties),h=0;h<d.length;h++)c=d[h],a=l(e.properties[c],t[c],r,n),void 0!==a&&(t[c]=a);if("always"!==r)for(m=Object.keys(t),h=0;h<m.length;h++)c=m[h],d.indexOf(c)<0&&(e.additionalProperties===!1||r===!1&&!e.additionalProperties)&&(i?i.mark(t,c):delete t[c])}else if("array"===o&&e.items){if("array"===s(e.items))for(h=0;h<e.items.length;h++)a=l(e.items[h],t[h],r,n),(void 0!==a||h<t.length)&&(t[h]=a);else if(t.length)for(h=0;h<t.length;h++)t[h]=l(e.items,t[h],r,n)}else if("array"===s(e.allOf)&&e.allOf.length){for(u=new f,h=0;h<e.allOf.length;h++)t=l(e.allOf[h],t,r,n,u);u.deleteDuplicates(),u.dispose()}return t}function m(e){this.path="data",this.schema=e.schema,this.formats=e.formats,this.greedy=e.greedy,this.resolver=e.resolver,this.id=e.id,this.funcache=e.funcache||{},this.scope=e.scope||{equalAny:d,unique:P,ucs2length:I,refs:{}}}function g(e,t){if("object"!==s(e))throw new Error(w);t=t||{};var r=0,n=function(){return"i"+r++},i=new j(e,t.schemas,t.missing$Ref||!1),o=new m({schema:e,resolver:i,id:n,schemas:t.schemas,formats:t.formats,greedy:t.greedy||!1}),a=E("validate","data")("validate.errors = []")('gen(data, "", validate.errors)')("return validate.errors.length === 0").compile({gen:o.compile()});return o.dispose(),o=null,a.errors=[],a.build=function(t,r){return l(e,r&&r.copy===!1?t:p(t),r&&r.additionalProperties,i)},a}var v=/[\/]/g,y=/(")/gim,b=/^[a-z_$][0-9a-z]*$/gi,w="jsen: invalid schema object",x="object"==typeof window&&!!window.navigator,A="/"!==new RegExp("/").source,E=r(10),O=r(11),P=r(12),j=r(13),S=r(21),I=r(22),C={},q={};C["null"]=function(e){return e+" === null"},C["boolean"]=function(e){return"typeof "+e+' === "boolean"'},C.string=function(e){return"typeof "+e+' === "string"'},C.number=function(e){return"typeof "+e+' === "number"'},C.integer=function(e){return"typeof "+e+' === "number" && !('+e+" % 1)"},C.array=function(e){return"Array.isArray("+e+")"},C.object=function(e){return"typeof "+e+' === "object" && '+e+" !== null && !Array.isArray("+e+")"},C.date=function(e){return e+" instanceof Date"},q["enum"]=function(e){var t=e.schema["enum"];e.code("if (!equalAny("+e.path+", "+JSON.stringify(t)+")) {"),e.error("enum"),e.code("}")},q.minimum=function(e){"number"==typeof e.schema.minimum&&(e.code("if ("+e.path+" < "+e.schema.minimum+") {"),e.error("minimum"),e.code("}"))},q.exclusiveMinimum=function(e){e.schema.exclusiveMinimum===!0&&"number"==typeof e.schema.minimum&&(e.code("if ("+e.path+" === "+e.schema.minimum+") {"),e.error("exclusiveMinimum"),e.code("}"))},q.maximum=function(e){"number"==typeof e.schema.maximum&&(e.code("if ("+e.path+" > "+e.schema.maximum+") {"),e.error("maximum"),e.code("}"))},q.exclusiveMaximum=function(e){e.schema.exclusiveMaximum===!0&&"number"==typeof e.schema.maximum&&(e.code("if ("+e.path+" === "+e.schema.maximum+") {"),e.error("exclusiveMaximum"),e.code("}"))},q.multipleOf=function(e){if("number"==typeof e.schema.multipleOf){var t=e.schema.multipleOf,r=t.toString().length-t.toFixed(0).length-1,n=r>0?Math.pow(10,r):1,i=e.path;r>0?e.code("if (+(Math.round(("+i+" * "+n+') + "e+" + '+r+') + "e-" + '+r+") % "+t*n+" !== 0) {"):e.code("if ((("+i+" * "+n+") % "+t*n+") !== 0) {"),e.error("multipleOf"),e.code("}")}},q.minLength=function(e){a(e.schema.minLength)&&(e.code("if (ucs2length("+e.path+") < "+e.schema.minLength+") {"),e.error("minLength"),e.code("}"))},q.maxLength=function(e){a(e.schema.maxLength)&&(e.code("if (ucs2length("+e.path+") > "+e.schema.maxLength+") {"),e.error("maxLength"),e.code("}"))},q.pattern=function(e){var t=e.schema.pattern;("string"==typeof t||t instanceof RegExp)&&(e.code("if (!("+n(t)+").test("+e.path+")) {"),e.error("pattern"),e.code("}"))},q.format=function(e){"string"==typeof e.schema.format&&S[e.schema.format]&&(e.code("if (!("+S[e.schema.format]+").test("+e.path+")) {"),e.error("format"),e.code("}"))},q.minItems=function(e){a(e.schema.minItems)&&(e.code("if ("+e.path+".length < "+e.schema.minItems+") {"),e.error("minItems"),e.code("}"))},q.maxItems=function(e){a(e.schema.maxItems)&&(e.code("if ("+e.path+".length > "+e.schema.maxItems+") {"),e.error("maxItems"),e.code("}"))},q.additionalItems=function(e){e.schema.additionalItems===!1&&Array.isArray(e.schema.items)&&(e.code("if ("+e.path+".length > "+e.schema.items.length+") {"),e.error("additionalItems"),e.code("}"))},q.uniqueItems=function(e){e.schema.uniqueItems&&(e.code("if (unique("+e.path+").length !== "+e.path+".length) {"),e.error("uniqueItems"),e.code("}"))},q.items=function(e){var t=e.declare(0),r=0;if("object"===s(e.schema.items))e.code("for ("+t+" = 0; "+t+" < "+e.path+".length; "+t+"++) {"),e.descend(e.path+"["+t+"]",e.schema.items),e.code("}");else if(Array.isArray(e.schema.items)){for(;r<e.schema.items.length;r++)e.code("if ("+e.path+".length - 1 >= "+r+") {"),e.descend(e.path+"["+r+"]",e.schema.items[r]),e.code("}");"object"===s(e.schema.additionalItems)&&(e.code("for ("+t+" = "+r+"; "+t+" < "+e.path+".length; "+t+"++) {"),e.descend(e.path+"["+t+"]",e.schema.additionalItems),e.code("}"))}},q.maxProperties=function(e){a(e.schema.maxProperties)&&(e.code("if (Object.keys("+e.path+").length > "+e.schema.maxProperties+") {"),e.error("maxProperties"),e.code("}"))},q.minProperties=function(e){a(e.schema.minProperties)&&(e.code("if (Object.keys("+e.path+").length < "+e.schema.minProperties+") {"),e.error("minProperties"),e.code("}"))},q.required=function(e){if(Array.isArray(e.schema.required))for(var t=0;t<e.schema.required.length;t++)e.code("if ("+o(e.path,e.schema.required[t])+" === undefined) {"),e.error("required",e.schema.required[t]),e.code("}")},q.properties=function(e){var t,r,n,i=e.schema.properties,a="object"===s(i)?Object.keys(i):[],c=Array.isArray(e.schema.required)?e.schema.required:[];if(a.length)for(r=0;r<a.length;r++)t=a[r],n=o(e.path,t),e.code("if ("+n+" !== undefined) {"),e.descend(n,i[t]),e.code("}"),c.indexOf(t)>-1&&(e.code("else {"),e.error("required",t),e.code("}"))},q.patternProperties=q.additionalProperties=function(e){var t,r,i,o,a,c,h,u="object"===s(e.schema.properties)?Object.keys(e.schema.properties):[],p=e.schema.patternProperties,d="object"===s(p)?Object.keys(p):[],f=e.schema.additionalProperties,l=f===!1||"object"===s(f);if(d.length||l){for(r=e.declare("[]"),i=e.declare('""'),o=e.declare(0),l&&(a=e.declare(!1)),e.code(r+" = Object.keys("+e.path+")"),e.code("for ("+o+" = 0; "+o+" < "+r+".length; "+o+"++) {")(i+" = "+r+"["+o+"]")("if ("+e.path+"["+i+"] === undefined) {")("continue")("}"),l&&e.code(a+" = false"),h=0;h<d.length;h++)c=d[h],e.code("if (("+n(c)+").test("+i+")) {"),e.descend(e.path+"["+i+"]",p[c]),l&&e.code(a+" = true"),e.code("}");l&&(u.length&&(t=e.declare(JSON.stringify(u)),e.code("if ("+t+".indexOf("+i+") > -1) {")("continue")("}")),e.code("if (!"+a+") {"),f===!1?e.error("additionalProperties",void 0,i):e.descend(e.path+"["+i+"]",f),e.code("}")),e.code("}")}},q.dependencies=function(e){if("object"===s(e.schema.dependencies))for(var t,r,n=Object.keys(e.schema.dependencies),i=n.length,a=0,c=0;c<i;c++){if(t=n[c],r=e.schema.dependencies[t],e.code("if ("+o(e.path,t)+" !== undefined) {"),"object"===s(r))e.descend(e.path,r);else for(a;a<r.length;a++)e.code("if ("+o(e.path,r[a])+" === undefined) {"),e.error("dependencies",r[a]),e.code("}");e.code("}")}},q.allOf=function(e){if(Array.isArray(e.schema.allOf))for(var t=0;t<e.schema.allOf.length;t++)e.descend(e.path,e.schema.allOf[t])},q.anyOf=function(e){if(Array.isArray(e.schema.anyOf)){var t=e.greedy,r=e.declare(0),n=e.declare(0),i=e.declare(!1),o=0;for(e.code(n+" = errors.length");o<e.schema.anyOf.length;o++)e.code("if (!"+i+") {"),e.code(r+" = errors.length"),e.greedy=!0,e.descend(e.path,e.schema.anyOf[o]),e.code(i+" = errors.length === "+r)("}");e.greedy=t,e.code("if (!"+i+") {"),e.error("anyOf"),e.code("} else {")("errors.length = "+n)("}")}},q.oneOf=function(e){if(Array.isArray(e.schema.oneOf)){var t=e.greedy,r=e.declare(0),n=e.declare(0),i=e.declare(0),o=0;for(e.code(n+" = errors.length"),e.code(r+" = 0");o<e.schema.oneOf.length;o++)e.code(i+" = errors.length"),e.greedy=!0,e.descend(e.path,e.schema.oneOf[o]),e.code("if (errors.length === "+i+") {")(r+"++")("}");e.greedy=t,e.code("if ("+r+" !== 1) {"),e.error("oneOf"),e.code("} else {")("errors.length = "+n)("}")}},q.not=function(e){if("object"===s(e.schema.not)){var t=e.greedy,r=e.declare(0);e.code(r+" = errors.length"),e.greedy=!0,e.descend(e.path,e.schema.not),e.greedy=t,e.code("if (errors.length === "+r+") {"),e.error("not"),e.code("} else {")("errors.length = "+r)("}")}},["minimum","exclusiveMinimum","maximum","exclusiveMaximum","multipleOf"].forEach(c.bind(null,"number")),["minLength","maxLength","pattern","format"].forEach(c.bind(null,"string")),["minItems","maxItems","additionalItems","uniqueItems","items"].forEach(c.bind(null,"array")),["maxProperties","minProperties","required","properties","patternProperties","additionalProperties","dependencies"].forEach(c.bind(null,"object")),["enum","allOf","anyOf","oneOf","not"].forEach(c.bind(null,null)),f.prototype.mark=function(e,t){var r,n=this.objects.indexOf(e);return n<0?(this.objects.push(e),r={},r[t]=1,void this.properties.push(r)):(r=this.properties[n],void(r[t]=r[t]?r[t]+1:1))},f.prototype.deleteDuplicates=function(){var e,t,r,n,i;for(n=0;n<this.properties.length;n++)for(e=this.properties[n],t=Object.keys(e),i=0;i<t.length;i++)r=t[i],e[r]>1&&delete this.objects[n][r]},f.prototype.dispose=function(){this.objects.length=0,this.properties.length=0},m.prototype.clone=function(e){var t=new m({schema:e,formats:this.formats,greedy:this.greedy,resolver:this.resolver,id:this.id,funcache:this.funcache,scope:this.scope});return t},m.prototype.declare=function(e){var t=this.id();return this.code.def(t,e),t},m.prototype.cache=function(e,t){var r,n=this.funcache[e];return n||(n=this.funcache[e]={key:this.id()},r=this.clone(t),n.func=r.compile(n.key),this.scope.refs[n.key]=n.func,r.dispose()),"refs."+n.key},m.prototype.error=function(e,t,r){var n=this.schema,o=this.path,s="data"!==o||t?'(path ? path + "." : "") + '+u(o,t)+",":"path,",a=t&&n.properties&&n.properties[t]?this.resolver.resolve(n.properties[t]):null,c=a?a.requiredMessage:n.invalidMessage;c||(c=a&&a.messages&&a.messages[e]||n.messages&&n.messages[e]),this.code("errors.push({"),c&&this.code("message: "+i(c)+","),r&&this.code("additionalProperties: "+r+","),this.code("path: "+s)("keyword: "+i(e))("})"),this.greedy||this.code("return")},m.prototype.refactor=function(e,t,r){var n="data"!==e?'(path ? path + "." : "") + '+u(e):"path",i=this.cache(r,t),o=this.declare();this.code(o+" = "+i+"("+e+", "+n+", errors)"),this.greedy||this.code("if (errors.length) { return }")},m.prototype.descend=function(e,t){var r=this.path,n=this.schema;this.path=e,this.schema=t,this.generate(),this.path=r,this.schema=n},m.prototype.generate=function(){function e(e){q[e](l)}var t,r,o,a,c,u,p,d=this.path,f=this.schema,l=this,m=this.scope;if("object"===s(f)){if(void 0!==f.$ref){if(f=this.resolver.resolve(f),this.resolver.hasRef(f))return void this.refactor(d,f,this.resolver.getNormalizedRef(this.schema)||this.schema.$ref);this.schema=f}if(o=h(f),o["enum"])return void q["enum"](l);for(a=Object.keys(o.perType),p=0;p<a.length;p++)u=a[p],this.code((p?"else ":"")+"if ("+C[u](d)+") {"),o.perType[u].forEach(e),this.code("}"),o.type&&(c=o.type.indexOf(u),c>-1&&o.type.splice(c,1));o.type&&(o.type.length?(this.code((a.length?"else ":"")+"if (!("+o.type.map(function(e){return C[e]?C[e](d):"true"}).join(" || ")+")) {"),this.error("type"),this.code("}")):(this.code("else {"),this.error("type"),this.code("}"))),o.allType.forEach(function(e){q[e](l)}),f.format&&this.formats&&(r=this.formats[f.format],r&&("string"==typeof r||r instanceof RegExp?(this.code("if (!("+n(r)+").test("+d+")) {"),this.error("format"),this.code("}")):"function"==typeof r&&((m.formats||(m.formats={}))[f.format]=r,(m.schemas||(m.schemas={}))[f.format]=f,t=i(f.format),this.code("if (!formats["+t+"]("+d+", schemas["+t+"])) {"),this.error("format"),this.code("}"))))}},m.prototype.compile=function(e){return this.code=E("jsen_compiled"+(e?"_"+e:""),"data","path","errors"),this.generate(),this.code.compile(this.scope)},m.prototype.dispose=function(){for(var e in this)this[e]=void 0},g.browser=x,g.clone=p,g.equal=O,g.unique=P,g.ucs2length=I,g.SchemaResolver=j,g.resolve=j.resolvePointer,e.exports=g},function(e,t){"use strict";e.exports=function(){var e=Array.apply(null,arguments),t=e.shift(),r="  ",n="",i="",o=1,s="{[",a="}]",c=function(){for(var e=r,t=0;t++<o-1;)e+=r;return e},h=function(e){n+=c()+e+"\n"},u=function(e){var t=e[0],r=e[e.length-1];return a.indexOf(t)>-1&&s.indexOf(r)>-1?(o--,h(e),o++):s.indexOf(r)>-1?(h(e),o++):a.indexOf(t)>-1?(o--,h(e)):h(e),u};return u.def=function(e,t){return i+=(i?",\n"+r+"    ":"")+e+(void 0!==t?" = "+t:""),u},u.toSource=function(){return"function "+t+"("+e.join(", ")+") {\n"+r+'"use strict"\n'+(i?r+"var "+i+";\n":"")+n+"}"},u.compile=function(e){var t="return ("+u.toSource()+")",r=e||{},n=Object.keys(r),i=n.map(function(e){return r[e]});return Function.apply(null,n.concat(t)).apply(null,i)},u}},function(e,t){"use strict";function r(e){var t=Object.prototype.toString.call(e);return t.substr(8,t.length-9).toLowerCase()}function n(e,t){var r,n,o=Object.keys(e).sort(),s=Object.keys(t).sort();if(!i(o,s))return!1;for(r=0;r<o.length;r++)if(n=o[r],!i(e[n],t[n]))return!1;return!0}function i(e,t){var o,s=typeof e,a=typeof t;if("object"===s&&(s=r(e)),"object"===a&&(a=r(t)),s!==a)return!1;if("object"===s)return n(e,t);if("regexp"===s)return e.toString()===t.toString();if("array"===s){if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(!i(e[o],t[o]))return!1;return!0}return e===t}e.exports=i},function(e,t,r){"use strict";function n(e,t,r){for(var n=0,i=e.length;n<i;n++)if(r(e[n],t))return n;return-1}var i=r(11);e.exports=function(e){return e.filter(function(e,t,r){return n(r,e,i)===t})},e.exports.findIndex=n},function(e,t,r){"use strict";function n(e,t){if(!t.length)return e;var r,i=t.shift();e&&"object"==typeof e&&e.hasOwnProperty(i)&&(r=e[i]);{if(!t.length)return r;if(r&&"object"==typeof r)return n(r,t)}}function i(e){var t=e.indexOf("#"),r={base:e.substr(0,t),path:[]};return t<0?(r.base=e,r):(e=e.substr(t+1))?(r.path=e.split("/").map(function(e){return decodeURIComponent(e).replace(/~1/g,"/").replace(/~0/g,"~")}),"/"===e[0]&&r.path.shift(),r):r}function o(e,t,r,n){this.rootSchema=e,this.resolvers=null,this.resolvedRootSchema=null,this.cache={},this.idCache={},this.refCache={refs:[],schemas:[]},this.missing$Ref=r,this.refStack=[],n=n||"",this._buildIdCache(e,n),n=this.refCache.refs[this.refCache.schemas.indexOf(this.rootSchema)]||n,this._buildResolvers(t,n)}var s=r(14),a=r(20),c="jsen: invalid schema reference",h="jsen: duplicate schema id",u="jsen: circular schema reference";o.prototype._cacheId=function(e,t,r){if(this.idCache[e])throw new Error(h+" "+e);this.idCache[e]={resolver:r,schema:t}},o.prototype._buildIdCache=function(e,t){var r,n,i,o=t;if(e&&"object"==typeof e)for("string"==typeof e.id&&e.id?(o=s.resolve(t,e.id),this._cacheId(o,e,this)):e===this.rootSchema&&t&&this._cacheId(t,e,this),e.$ref&&"string"==typeof e.$ref&&(r=s.resolve(o,e.$ref),this.refCache.schemas.push(e),this.refCache.refs.push(r)),n=Object.keys(e),i=0;i<n.length;i++)this._buildIdCache(e[n[i]],o)},o.prototype._buildResolvers=function(e,t){if(e&&"object"==typeof e){var r=this,n={};Object.keys(e).forEach(function(i){var a=s.resolve(t,i),c=new o(e[i],null,r.missing$Ref,a);r._cacheId(a,c.rootSchema,c),Object.keys(c.idCache).forEach(function(e){r.idCache[e]=c.idCache[e]}),n[i]=c}),this.resolvers=n}},o.prototype.getNormalizedRef=function(e){var t=this.refCache.schemas.indexOf(e);return this.refCache.refs[t]},o.prototype._resolveRef=function(e){var t,r,o,s,h,u=new Error(c+" "+e),p=this.idCache;if(!e||"string"!=typeof e)throw u;if(e===a.id&&(h=a),r=p[e],r&&(h=r.resolver.resolve(r.schema)),void 0===h&&(o=i(e),s=o.path,o.base&&(r=p[o.base]||p[o.base+"#"],r?h=r.resolver.resolve(n(r.schema,s.slice(0))):s.unshift(o.base))),void 0===h&&this.resolvedRootSchema&&(h=n(this.resolvedRootSchema,s.slice(0))),void 0===h&&(h=n(this.rootSchema,s.slice(0))),void 0===h&&s.length&&this.resolvers&&(t=n(this.resolvers,s),t&&(h=t.resolve(t.rootSchema))),void 0===h||"object"!=typeof h){if(!this.missing$Ref)throw u;h={}}return this.cache[e]===h?h:(this.cache[e]=h,void 0!==h.$ref&&(h=this.resolve(h)),h)},o.prototype.resolve=function(e){if(!e||"object"!=typeof e||void 0===e.$ref)return e;var t=this.getNormalizedRef(e)||e.$ref,r=this.cache[t];if(void 0!==r)return r;if(this.refStack.indexOf(t)>-1)throw new Error(u+" "+t);return this.refStack.push(t),r=this._resolveRef(t),this.refStack.pop(),e===this.rootSchema&&(this.resolvedRootSchema=r),r},o.prototype.hasRef=function(e){var t,r,n,i,o=Object.keys(e);if(o.indexOf("$ref")>-1)return!0;for(n=0,t=o.length;n<t;n++)if(r=o[n],e[r]&&"object"==typeof e[r]&&!Array.isArray(e[r])&&(i=this.hasRef(e[r])))return!0;return!1},o.resolvePointer=function(e,t){var r=i(t),o=r.path;return r.base&&(o=[r.base].concat(o)),n(e,o)},e.exports=o},function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&h(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return c(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function h(e){return"object"==typeof e&&null!==e}function u(e){return null===e}function p(e){return null==e}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var d=r(15);t.parse=i,t.resolve=s,t.resolveObject=a,t.format=o,t.Url=n;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,A=/^([a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},O={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=r(17);n.prototype.parse=function(e,t,r){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=f.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===n.substr(0,2);!s||i&&O[i]||(n=n.substr(2),this.slashes=!0)}if(!O[i]&&(s||i&&!P[i])){for(var a=-1,h=0;h<b.length;h++){var u=n.indexOf(b[h]);u!==-1&&(a===-1||u<a)&&(a=u)}var p,l;l=a===-1?n.lastIndexOf("@"):n.lastIndexOf("@",a),l!==-1&&(p=n.slice(0,l),n=n.slice(l+1),this.auth=decodeURIComponent(p)),a=-1;for(var h=0;h<y.length;h++){var u=n.indexOf(y[h]);u!==-1&&(a===-1||u<a)&&(a=u)}a===-1&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),h=0,S=g.length;h<S;h++){var I=g[h];if(I&&!I.match(x)){for(var C="",q=0,k=I.length;q<k;q++)C+=I.charCodeAt(q)>127?"x":I[q];if(!C.match(x)){var R=g.slice(0,h),T=g.slice(h+1),F=I.match(A);F&&(R.push(F[1]),T.unshift(F[2])),T.length&&(n="/"+T.join(".")+n),this.hostname=R.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var M=this.hostname.split("."),$=[],h=0;h<M.length;++h){var N=M[h];$.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(N):N)}this.hostname=$.join(".")}var L=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+L,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!E[o])for(var h=0,S=v.length;h<S;h++){var z=v[h],W=encodeURIComponent(z);W===z&&(W=escape(z)),n=n.split(z).join(W)}var H=n.indexOf("#");H!==-1&&(this.hash=n.substr(H),n=n.slice(0,H));var _=n.indexOf("?");if(_!==-1?(this.search=n.substr(_),this.query=n.substr(_+1),t&&(this.query=j.parse(this.query)),n=n.slice(0,_)):t&&(this.search="",this.query={}),n&&(this.pathname=n),P[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",N=this.search||"";this.path=L+N}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h(this.query)&&Object.keys(this.query).length&&(o=j.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||P[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),P[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!P[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||O[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",s=r.search||"";r.path=o+s}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),h=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=h||a||r.host&&e.pathname,f=d,l=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],m=r.protocol&&!P[r.protocol];if(m&&(r.hostname="",r.port=null,r.host&&(""===l[0]?l[0]=r.host:l.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),d=d&&(""===i[0]||""===l[0])),h)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,l=i;else if(i.length)l||(l=[]),l.pop(),l=l.concat(i),r.search=e.search,r.query=e.query;else if(!p(e.search)){if(m){r.hostname=r.host=l.shift();var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=e.search,r.query=e.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!l.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=l.slice(-1)[0],y=(r.host||e.host)&&("."===v||".."===v)||""===v,b=0,w=l.length;w>=0;w--)v=l[w],"."==v?l.splice(w,1):".."===v?(l.splice(w,1),b++):b&&(l.splice(w,1),b--);if(!d&&!f)for(;b--;b)l.unshift("..");!d||""===l[0]||l[0]&&"/"===l[0].charAt(0)||l.unshift(""),y&&"/"!==l.join("/").substr(-1)&&l.push("");var x=""===l[0]||l[0]&&"/"===l[0].charAt(0);if(m){r.hostname=r.host=x?"":l.length?l.shift():"";var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return d=d||r.host&&l.length,d&&!x&&l.unshift(""),l.length?r.pathname=l.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){var n;(function(e,i){!function(o){function s(e){throw RangeError(R[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function c(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(k,".");var i=e.split("."),o=a(i,t).join(".");return n+o}function h(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function u(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=M(e>>>10&1023|55296),e=56320|1023&e),t+=M(e)}).join("")}function p(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,r){var n=0;for(e=r?F(e/P):e>>1,e+=F(e/t);e>T*E>>1;n+=x)e=F(e/T);return F(n+(T+1)*e/(e+O))}function l(e){var t,r,n,i,o,a,c,h,d,l,m=[],g=e.length,v=0,y=S,b=j;for(r=e.lastIndexOf(I),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&s("not-basic"),m.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(o=v,a=1,c=x;i>=g&&s("invalid-input"),h=p(e.charCodeAt(i++)),(h>=x||h>F((w-v)/a))&&s("overflow"),v+=h*a,d=c<=b?A:c>=b+E?E:c-b,!(h<d);c+=x)l=x-d,a>F(w/l)&&s("overflow"),a*=l;t=m.length+1,b=f(v-o,t,0==o),F(v/t)>w-y&&s("overflow"),y+=F(v/t),v%=t,m.splice(v++,0,y)}return u(m)}function m(e){var t,r,n,i,o,a,c,u,p,l,m,g,v,y,b,O=[];for(e=h(e),g=e.length,t=S,r=0,o=j,a=0;a<g;++a)m=e[a],m<128&&O.push(M(m));for(n=i=O.length,i&&O.push(I);n<g;){for(c=w,a=0;a<g;++a)m=e[a],m>=t&&m<c&&(c=m);for(v=n+1,c-t>F((w-r)/v)&&s("overflow"),r+=(c-t)*v,t=c,a=0;a<g;++a)if(m=e[a],m<t&&++r>w&&s("overflow"),m==t){for(u=r,p=x;l=p<=o?A:p>=o+E?E:p-o,!(u<l);p+=x)b=u-l,y=x-l,O.push(M(d(l+b%y,0))),u=F(b/y);O.push(M(d(u,0))),o=f(r,v,n==i),r=0,++n}++r,++t}return O.join("")}function g(e){return c(e,function(e){return C.test(e)?l(e.slice(4).toLowerCase()):e})}function v(e){return c(e,function(e){return q.test(e)?"xn--"+m(e):e})}var y=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof i&&i);y.global!==y&&y.window!==y&&y.self!==y||(o=y);var b,w=2147483647,x=36,A=1,E=26,O=38,P=700,j=72,S=128,I="-",C=/^xn--/,q=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=x-A,F=Math.floor,M=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:h,encode:u},decode:l,encode:m,toASCII:v,toUnicode:g},n=function(){return b}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}(this)}).call(t,r(16)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){"use strict";t.decode=t.parse=r(18),t.encode=t.stringify=r(19)},function(e,t){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var h=0;h<c;++h){var u,p,d,f,l=e[h].replace(s,"%20"),m=l.indexOf(n);m>=0?(u=l.substr(0,m),p=l.substr(m+1)):(u=l,p=""),d=decodeURIComponent(u),f=decodeURIComponent(p),r(o,d)?Array.isArray(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o}},function(e,t){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var o=encodeURIComponent(r(i))+n;return Array.isArray(e[i])?e[i].map(function(e){return o+encodeURIComponent(r(e))}).join(t):o+encodeURIComponent(r(e[i]))}).join(t):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(e)):""}},function(e,t){e.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}}},function(e,t){"use strict";var r={};r["date-time"]=/(\d\d\d\d)(-)?(\d\d)(-)?(\d\d)(T)?(\d\d)(:)?(\d\d)(:)?(\d\d)(\.\d+)?(Z|([+-])(\d\d)(:)?(\d\d))/,r.uri=/^([a-zA-Z][a-zA-Z0-9+-.]*:){0,1}\/\/[^\s]*$/,r.email=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,r.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,r.ipv6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|[fF][eE]80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::([fF]{4}(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,r.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]))*$/,e.exports=r},function(e,t){"use strict";function r(e){for(var t,r,n=0,i=0,o=e.length;i<o;)n++,t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o&&(r=e.charCodeAt(i++),56320!==(64512&r)&&i--);return n}e.exports=r}])})},function(e,t){var r=function(){function e(e,t,r){this.report=e,this.name=t,this.displayName=r}return e.prototype.getFilters=function(){return this.report.service.hpm.get("/report/pages/"+this.name+"/filters",{uid:this.report.config.uniqueId},this.report.iframe.contentWindow).then(function(e){return e.body},function(e){throw e.body})},e.prototype.removeFilters=function(){return this.setFilters([])},e.prototype.setActive=function(){var e={name:this.name,displayName:null};return this.report.service.hpm.put("/report/pages/active",e,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)["catch"](function(e){throw e.body})},e.prototype.setFilters=function(e){return this.report.service.hpm.put("/report/pages/"+this.name+"/filters",e,{uid:this.report.config.uniqueId},this.report.iframe.contentWindow)["catch"](function(e){throw e.body})},e}();t.Page=r},function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(2),o=r(5),s=function(e){function t(r,n,i){e.call(this,r,n,i),this.loadPath="/dashboard/load",Array.prototype.push.apply(this.allowedEvents,t.allowedEvents)}return n(t,e),t.findIdFromEmbedUrl=function(e){var t,r=/dashboardId="?([^&]+)"?/,n=e.match(r);return n&&(t=n[1]),t},t.prototype.getId=function(){var e=this.config.id||this.element.getAttribute(t.dashboardIdAttribute)||t.findIdFromEmbedUrl(this.config.embedUrl);if("string"!=typeof e||0===e.length)throw new Error("Dashboard id is required, but it was not found. You must provide an id either as part of embed configuration or as attribute '"+t.dashboardIdAttribute+"'.");return e},t.prototype.validate=function(e){var t=o.validateDashboardLoad(e);return t?t:this.ValidatePageView(e.pageView)},t.prototype.ValidatePageView=function(e){if(e&&"fitToWidth"!==e&&"oneColumn"!==e&&"actualSize"!==e)return[{message:"pageView must be one of the followings: fitToWidth, oneColumn, actualSize"}]},t.allowedEvents=["tileClicked","error"],t.dashboardIdAttribute="powerbi-dashboard-id",t.typeAttribute="powerbi-type",t.type="Dashboard",t}(i.Embed);t.Dashboard=s},function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=r(2),o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.getId=function(){throw new Error("Not implemented. Embedding tiles is not supported yet.")},t.prototype.validate=function(e){throw new Error("Not implemented. Embedding tiles is not supported yet.")},t.type="Tile",t}(i.Embed);t.Tile=o},function(e,t,r){var n=r(10),i=r(11),o=r(12),s=r(13);t.hpmFactory=function(e,t,r,i){return void 0===r&&(r=n["default"].version),void 0===i&&(i=n["default"].type),new o.HttpPostMessage(e,{"x-sdk-type":i,"x-sdk-version":r},t)},t.wpmpFactory=function(e,t,r){return new i.WindowPostMessageProxy({processTrackingProperties:{addTrackingProperties:o.HttpPostMessage.addTrackingProperties,getTrackingProperties:o.HttpPostMessage.getTrackingProperties},isErrorMessage:o.HttpPostMessage.isErrorMessage,name:e,logMessages:t,eventSourceOverrideWindow:r})},t.routerFactory=function(e){return new s.Router(e)}},function(e,t){var r={version:"2.2.6",type:"js"};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r},function(e,t,r){/*! window-post-message-proxy v0.2.4 | (c) 2016 Microsoft Corporation MIT */
!function(t,r){e.exports=r()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t){"use strict";var r=function(){function e(t){var r=this;void 0===t&&(t={processTrackingProperties:{addTrackingProperties:e.defaultAddTrackingProperties,getTrackingProperties:e.defaultGetTrackingProperties},isErrorMessage:e.defaultIsErrorMessage,receiveWindow:window,name:e.createRandomString()}),this.pendingRequestPromises={},this.addTrackingProperties=t.processTrackingProperties&&t.processTrackingProperties.addTrackingProperties||e.defaultAddTrackingProperties,this.getTrackingProperties=t.processTrackingProperties&&t.processTrackingProperties.getTrackingProperties||e.defaultGetTrackingProperties,this.isErrorMessage=t.isErrorMessage||e.defaultIsErrorMessage,this.receiveWindow=t.receiveWindow||window,this.name=t.name||e.createRandomString(),this.logMessages=t.logMessages||!1,this.eventSourceOverrideWindow=t.eventSourceOverrideWindow,this.suppressWarnings=t.suppressWarnings||!1,this.logMessages&&console.log("new WindowPostMessageProxy created with name: "+this.name+" receiving on window: "+this.receiveWindow.document.title),this.handlers=[],this.windowMessageHandler=function(e){return r.onMessageReceived(e)},this.start()}return e.defaultAddTrackingProperties=function(t,r){return t[e.messagePropertyName]=r,t},e.defaultGetTrackingProperties=function(t){return t[e.messagePropertyName]},e.defaultIsErrorMessage=function(e){return!!e.error},e.createDeferred=function(){var e={resolve:null,reject:null,promise:null},t=new Promise(function(t,r){e.resolve=t,e.reject=r});return e.promise=t,e},e.createRandomString=function(){return(Math.random()+1).toString(36).substring(7)},e.prototype.addHandler=function(e){this.handlers.push(e)},e.prototype.removeHandler=function(e){var t=this.handlers.indexOf(e);if(t===-1)throw new Error("You attempted to remove a handler but no matching handler was found.");this.handlers.splice(t,1)},e.prototype.start=function(){this.receiveWindow.addEventListener("message",this.windowMessageHandler)},e.prototype.stop=function(){this.receiveWindow.removeEventListener("message",this.windowMessageHandler)},e.prototype.postMessage=function(t,r){var n={id:e.createRandomString()};this.addTrackingProperties(r,n),this.logMessages&&(console.log(this.name+" Posting message:"),console.log(JSON.stringify(r,null,"  "))),t.postMessage(r,"*");var i=e.createDeferred();return this.pendingRequestPromises[n.id]=i,i.promise},e.prototype.sendResponse=function(e,t,r){this.addTrackingProperties(t,r),this.logMessages&&(console.log(this.name+" Sending response:"),console.log(JSON.stringify(t,null,"  "))),e.postMessage(t,"*")},e.prototype.onMessageReceived=function(e){var t=this;this.logMessages&&(console.log(this.name+" Received message:"),console.log("type: "+e.type),console.log(JSON.stringify(e.data,null,"  ")));var r=this.eventSourceOverrideWindow||e.source,n=e.data;if("object"!=typeof n)return void(this.suppressWarnings||console.warn("Proxy("+this.name+"): Received message that was not an object. Discarding message"));var i;try{i=this.getTrackingProperties(n)}catch(o){this.suppressWarnings||console.warn("Proxy("+this.name+"): Error occurred when attempting to get tracking properties from incoming message:",JSON.stringify(n,null,"  "),"Error: ",o)}var s;if(i&&(s=this.pendingRequestPromises[i.id]),s){var a=!0;try{a=this.isErrorMessage(n)}catch(o){console.warn("Proxy("+this.name+") Error occurred when trying to determine if message is consider an error response. Message: ",JSON.stringify(n,null,""),"Error: ",o)}a?s.reject(n):s.resolve(n),delete this.pendingRequestPromises[i.id]}else{var c=this.handlers.some(function(e){var o=!1;try{o=e.test(n)}catch(s){t.suppressWarnings||console.warn("Proxy("+t.name+"): Error occurred when handler was testing incoming message:",JSON.stringify(n,null,"  "),"Error: ",s)}if(o){var a=void 0;try{a=Promise.resolve(e.handle(n))}catch(s){t.suppressWarnings||console.warn("Proxy("+t.name+"): Error occurred when handler was processing incoming message:",JSON.stringify(n,null,"  "),"Error: ",s),a=Promise.resolve()}return a.then(function(e){if(!e){var o="Handler for message: "+JSON.stringify(n,null,"  ")+" did not return a response message. The default response message will be returned instead.";t.suppressWarnings||console.warn("Proxy("+t.name+"): "+o),e={warning:o}}t.sendResponse(r,e,i)}),!0}});c||this.suppressWarnings||console.warn("Proxy("+this.name+") did not handle message. Handlers: "+this.handlers.length+"  Message: "+JSON.stringify(n,null,"")+".")}},e.messagePropertyName="windowPostMessageProxy",e}();t.WindowPostMessageProxy=r}])})},function(e,t,r){/*! http-post-message v0.2.3 | (c) 2016 Microsoft Corporation MIT */
!function(t,r){e.exports=r()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t){"use strict";var r=function(){function e(e,t,r){void 0===t&&(t={}),this.defaultHeaders=t,this.defaultTargetWindow=r,this.windowPostMessageProxy=e}return e.addTrackingProperties=function(e,t){return e.headers=e.headers||{},t&&t.id&&(e.headers.id=t.id),e},e.getTrackingProperties=function(e){return{id:e.headers&&e.headers.id}},e.isErrorMessage=function(e){return"number"==typeof(e&&e.statusCode)&&!(200<=e.statusCode&&e.statusCode<300)},e.prototype.get=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=this.defaultTargetWindow),this.send({method:"GET",url:e,headers:t},r)},e.prototype.post=function(e,t,r,n){return void 0===r&&(r={}),void 0===n&&(n=this.defaultTargetWindow),this.send({method:"POST",url:e,headers:r,body:t},n)},e.prototype.put=function(e,t,r,n){return void 0===r&&(r={}),void 0===n&&(n=this.defaultTargetWindow),this.send({method:"PUT",url:e,headers:r,body:t},n)},e.prototype.patch=function(e,t,r,n){return void 0===r&&(r={}),void 0===n&&(n=this.defaultTargetWindow),this.send({method:"PATCH",url:e,headers:r,body:t},n)},e.prototype["delete"]=function(e,t,r,n){return void 0===t&&(t=null),void 0===r&&(r={}),void 0===n&&(n=this.defaultTargetWindow),this.send({method:"DELETE",url:e,headers:r,body:t},n)},e.prototype.send=function(e,t){if(void 0===t&&(t=this.defaultTargetWindow),e.headers=this.assign({},this.defaultHeaders,e.headers),!t)throw new Error("target window is not provided.  You must either provide the target window explicitly as argument to request, or specify default target window when constructing instance of this class.");return this.windowPostMessageProxy.postMessage(t,e)},e.prototype.assign=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var n=Object(e);return t.forEach(function(e){if(void 0!==e&&null!==e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}),n},e}();t.HttpPostMessage=r}])})},function(e,t,r){/*! powerbi-router v0.1.5 | (c) 2016 Microsoft Corporation MIT */
!function(t,r){e.exports=r()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=r(1),i=function(){function e(e){this.handlers=e,this.getRouteRecognizer=new n,this.patchRouteRecognizer=new n,this.postRouteRecognizer=new n,this.putRouteRecognizer=new n,this.deleteRouteRecognizer=new n}return e.prototype.get=function(e,t){return this.registerHandler(this.getRouteRecognizer,"GET",e,t),this},e.prototype.patch=function(e,t){return this.registerHandler(this.patchRouteRecognizer,"PATCH",e,t),this},e.prototype.post=function(e,t){return this.registerHandler(this.postRouteRecognizer,"POST",e,t),this},e.prototype.put=function(e,t){return this.registerHandler(this.putRouteRecognizer,"PUT",e,t),this},e.prototype["delete"]=function(e,t){return this.registerHandler(this.deleteRouteRecognizer,"DELETE",e,t),this},e.prototype.registerHandler=function(e,t,r,n){var i=function(e){var t=new o;return Promise.resolve(n(e,t)).then(function(e){return t})};e.add([{path:r,handler:i}]);var s={test:function(r){if(r.method!==t)return!1;var n=e.recognize(r.url);if(void 0===n)return!1;var i=n[0];return r.params=i.params,r.queryParams=n.queryParams,r.handler=i.handler,!0},handle:function(e){return e.handler(e)}};this.handlers.addHandler(s)},e}();t.Router=i;var o=function(){function e(){this.statusCode=200,this.headers={},this.body=null}return e.prototype.send=function(e,t){this.statusCode=e,this.body=t},e}();t.Response=o},function(e,t,r){var n;(function(e){(function(){"use strict";function i(e,t,r){this.path=e,this.matcher=t,this.delegate=r}function o(e){this.routes={},this.children={},this.target=e}function s(e,t,r){return function(n,o){var a=e+n;return o?void o(s(a,t,r)):new i(e+n,t,r)}}function a(e,t,r){for(var n=0,i=0;i<e.length;i++)n+=e[i].path.length;t=t.substr(n);var o={path:t,handler:r};e.push(o)}function c(e,t,r,n){var i=t.routes;for(var o in i)if(i.hasOwnProperty(o)){var s=e.slice();a(s,o,i[o]),t.children[o]?c(s,t.children[o],r,n):r.call(n,s)}}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){this.string=e}function p(e){this.name=e}function d(e){this.name=e}function f(){}function l(e,t,r){"/"===e.charAt(0)&&(e=e.substr(1));var n=e.split("/"),i=new Array(n.length);r.val="";for(var o=0;o<n.length;o++){var s,a=n[o];(s=a.match(/^:([^\/]+)$/))?(i[o]=new p(s[1]),t.push(s[1]),r.val+="3"):(s=a.match(/^\*([^\/]+)$/))?(i[o]=new d(s[1]),r.val+="1",t.push(s[1])):""===a?(i[o]=new f,r.val+="2"):(i[o]=new u(a),r.val+="4")}return r.val=+r.val,i}function m(e){this.charSpec=e,this.nextStates=[],this.charSpecs={},this.regex=void 0,this.handlers=void 0,this.specificity=void 0}function g(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function v(e,t){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];r=r.concat(o.match(t))}return r}function y(e){this.queryParams=e||{}}function b(e,t,r){var n=e.handlers,i=e.regex,o=t.match(i),s=1,a=new y(r);a.length=n.length;for(var c=0;c<n.length;c++){for(var h=n[c],u=h.names,p={},d=0;d<u.length;d++)p[u[d]]=o[s++];a[c]={handler:h.handler,params:p,isDynamic:!!u.length}}return a}function w(e){e=e.replace(/\+/gm,"%20");var t;try{t=decodeURIComponent(e)}catch(r){t=""}return t}i.prototype={to:function(e,t){var r=this.delegate;if(r&&r.willAddRoute&&(e=r.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},o.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,r,n){var i=new o(t);this.children[e]=i;var a=s(e,i,n);n&&n.contextEntered&&n.contextEntered(t,a),r(a)}};var x=function(e,t){var r=new o;e(s("",r,this.delegate)),c([],r,function(e){t?t(this,e):this.add(e)},this)},A=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],E=new RegExp("(\\"+A.join("|\\")+")","g");u.prototype={eachChar:function(e){for(var t,r=this.string,n=0;n<r.length;n++)t=r.charAt(n),e=e.put({invalidChars:void 0,repeat:!1,validChars:t});return e},regex:function(){return this.string.replace(E,"\\$1")},generate:function(){return this.string}},p.prototype={eachChar:function(e){return e.put({invalidChars:"/",repeat:!0,validChars:void 0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},d.prototype={eachChar:function(e){return e.put({invalidChars:"",repeat:!0,validChars:void 0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},f.prototype={eachChar:function(e){return e},regex:function(){return""},generate:function(){return""}},m.prototype={get:function(e){if(this.charSpecs[e.validChars])return this.charSpecs[e.validChars];for(var t=this.nextStates,r=0;r<t.length;r++){var n=t[r],i=n.charSpec.validChars===e.validChars;if(i=i&&n.charSpec.invalidChars===e.invalidChars)return this.charSpecs[e.validChars]=n,n}},put:function(e){var t;return(t=this.get(e))?t:(t=new m(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,r,n,i=this.nextStates,o=[],s=0;s<i.length;s++)t=i[s],r=t.charSpec,"undefined"!=typeof(n=r.validChars)?n.indexOf(e)!==-1&&o.push(t):"undefined"!=typeof(n=r.invalidChars)&&n.indexOf(e)===-1&&o.push(t);return o}};var O=Object.create||function(e){function t(){}return t.prototype=e,new t};y.prototype=O({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var P=function(){this.rootState=new m,this.names={}};P.prototype={add:function(e,t){for(var r,n=this.rootState,i="^",o={},s=new Array(e.length),a=[],c=!0,h=0;h<e.length;h++){var u=e[h],p=[],d=l(u.path,p,o);a=a.concat(d);for(var m=0;m<d.length;m++){var g=d[m];g instanceof f||(c=!1,n=n.put({invalidChars:void 0,repeat:!1,validChars:"/"}),i+="/",n=g.eachChar(n),i+=g.regex())}var v={handler:u.handler,names:p};s[h]=v}c&&(n=n.put({invalidChars:void 0,repeat:!1,validChars:"/"}),i+="/"),n.handlers=s,n.regex=new RegExp(i+"$"),n.specificity=o,(r=t&&t.as)&&(this.names[r]={segments:a,handlers:s})},handlersFor:function(e){var t=this.names[e];if(!t)throw new Error("There is no route named "+e);for(var r=new Array(t.handlers.length),n=0;n<t.handlers.length;n++)r[n]=t.handlers[n];return r},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var r=this.names[e],n="";if(!r)throw new Error("There is no route named "+e);for(var i=r.segments,o=0;o<i.length;o++){var s=i[o];s instanceof f||(n+="/",n+=s.generate(t))}return"/"!==n.charAt(0)&&(n="/"+n),t&&t.queryParams&&(n+=this.generateQueryString(t.queryParams,r.handlers)),n},generateQueryString:function(e,t){var r=[],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);n.sort();for(var o=0;o<n.length;o++){i=n[o];var s=e[i];if(null!=s){var a=encodeURIComponent(i);if(h(s))for(var c=0;c<s.length;c++){var u=i+"[]="+encodeURIComponent(s[c]);r.push(u)}else a+="="+encodeURIComponent(s),r.push(a)}}return 0===r.length?"":"?"+r.join("&")},parseQueryString:function(e){for(var t=e.split("&"),r={},n=0;n<t.length;n++){var i,o=t[n].split("="),s=w(o[0]),a=s.length,c=!1;1===o.length?i="true":(a>2&&"[]"===s.slice(a-2)&&(c=!0,s=s.slice(0,a-2),r[s]||(r[s]=[])),i=o[1]?w(o[1]):""),c?r[s].push(i):r[s]=i}return r},recognize:function(e){var t,r,n,i=[this.rootState],o={},s=!1;if(n=e.indexOf("?"),n!==-1){var a=e.substr(n+1,e.length);e=e.substr(0,n),o=this.parseQueryString(a)}for(e=decodeURI(e),"/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),s=!0),r=0;r<e.length&&(i=v(i,e.charAt(r)),i.length);r++);var c=[];for(r=0;r<i.length;r++)i[r].handlers&&c.push(i[r]);i=g(c);var h=c[0];if(h&&h.handlers)return s&&"(.+)$"===h.regex.source.slice(-5)&&(e+="/"),b(h,e,o)}},P.prototype.map=x,P.VERSION="0.1.11";var j=P;r(3).amd?(n=function(){return j}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))):"undefined"!=typeof e&&e.exports?e.exports=j:"undefined"!=typeof this&&(this.RouteRecognizer=j)}).call(this)}).call(t,r(2)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}])})}])});